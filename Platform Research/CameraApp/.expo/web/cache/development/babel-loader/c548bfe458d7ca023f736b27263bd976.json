{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { Video } from 'expo-av';\nimport { useEffect } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasAudioPermission = _useState2[0],\n      setHasAudioPermission = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasCameraPermission = _useState4[0],\n      setHasCameraPermission = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      camera = _useState6[0],\n      setCamera = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      record = _useState8[0],\n      setRecord = _useState8[1];\n\n  var _useState9 = useState(Camera.Constants.Type.back),\n      _useState10 = _slicedToArray(_useState9, 2),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var video = React.useRef(null);\n\n  var _Reac$useState = Reac.useState({}),\n      _Reac$useState2 = _slicedToArray(_Reac$useState, 2),\n      status = _Reac$useState2[0],\n      setStatus = _Reac$useState2[1];\n\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n      setHasCameraPermission(cameraStatus.status === 'granted');\n      var audioStatus = yield Camera.requestMicrophonePermissionsAsync();\n      setHasCameraPermission(audioStatus.status === 'granted');\n    })();\n  }, []);\n\n  var takeVideo = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (camera) {\n        var data = yield camera.recordAsync({\n          maxDuration: 10\n        });\n        setRecord(data.uri);\n        console.log(data.uri);\n      }\n    });\n\n    return function takeVideo() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var stopVideo = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      camera.stopRecording();\n    });\n\n    return function stopVideo() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  if (hasCameraPermission === null || hasAudioPermission === null) {\n    return _jsx(View, {});\n  }\n\n  if (hasCameraPermission === false || hasAudioPermission === false) {\n    return _jsx(Text, {\n      children: \"No access to camera.\"\n    });\n  }\n\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [_jsx(View, {\n      style: styles.cameraContainer,\n      children: _jsx(Camera, {\n        ref: function ref(_ref4) {\n          return setCamera(_ref4);\n        },\n        style: styles.fixedRatio,\n        type: type,\n        ratio: '4:3'\n      })\n    }), _jsx(Video, {\n      ref: video,\n      style: styles.video,\n      source: {\n        uri: record\n      },\n      useNativeControls: true,\n      resizeMode: \"contain\",\n      isLooping: true,\n      onPlaybackStatusUpdate: function onPlaybackStatusUpdate(status) {\n        return setStatus(function () {\n          return status;\n        });\n      }\n    }), _jsx(View, {\n      style: styles.buttons,\n      children: _jsx(Button, {\n        title: status.isPlaying ? 'Pause' : 'Play',\n        onPress: function onPress() {\n          return status.isPlaying ? video.current.pauseAsync() : video.current.playAsync();\n        }\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["StatusBar","Camera","Video","useEffect","App","useState","hasAudioPermission","setHasAudioPermission","hasCameraPermission","setHasCameraPermission","camera","setCamera","record","setRecord","Constants","Type","back","type","setType","video","React","useRef","Reac","status","setStatus","cameraStatus","requestCameraPermissionsAsync","audioStatus","requestMicrophonePermissionsAsync","takeVideo","data","recordAsync","maxDuration","uri","console","log","stopVideo","stopRecording","flex","styles","cameraContainer","ref","fixedRatio","buttons","isPlaying","current","pauseAsync","playAsync","StyleSheet","create","container","backgroundColor","alignItems","justifyContent"],"sources":["/Users/markvalentino/reactnativeprojects/AI/App.js"],"sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport { StyleSheet, Text, View, Button, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { Video } from 'expo-av';\nimport { useEffect } from 'react';\n// https://www.youtube.com/watch?v=4VFYqw5h_qs\nexport default function App() {\n\n  const [hasAudioPermission, setHasAudioPermission] = useState(null);\n  const [hasCameraPermission, setHasCameraPermission] = useState(null);\n  const [camera, setCamera] = useState(null);\n  const [record, setRecord] = useState(null);\n  const [type, setType] = useState(Camera.Constants.Type.back);\n  const video = React.useRef(null);\n  const [status, setStatus] = Reac.useState({});\n\n  useEffect(() => {\n    (async () => {\n      const cameraStatus = await Camera.requestCameraPermissionsAsync();\n      setHasCameraPermission(cameraStatus.status === 'granted');\n\n      const audioStatus = await Camera.requestMicrophonePermissionsAsync();\n      setHasCameraPermission(audioStatus.status === 'granted');\n\n    })();\n  }, []);\n\n  const takeVideo = async () => {\n    if(camera){\n      const data = await camera.recordAsync({\n        maxDuration:10\n      })\n      setRecord(data.uri);\n      console.log(data.uri);\n    }\n  }\n\n  const stopVideo = async () => {\n    camera.stopRecording();\n  }\n\n  if (hasCameraPermission === null || hasAudioPermission === null) {\n    return <View />;\n  }\n\n  if (hasCameraPermission === false || hasAudioPermission === false){\n    return <Text>No access to camera.</Text>\n  }\n\n  return (\n   <View style = {{flex:1}} >\n    <View style = {styles.cameraContainer} >\n      <Camera\n      ref = {ref => setCamera(ref)}\n      style = {styles.fixedRatio}\n      type = {type}\n      ratio = {'4:3'} />\n\n    </View>\n    <Video \n    ref = {video}\n    style = {styles.video}\n    source = {{\n      uri: record,\n    }}\n    useNativeControls\n    resizeMode='contain'\n    isLooping\n    onPlaybackStatusUpdate={status => setStatus(()=>status)}\n    />\n    <View style={styles.buttons}>\n      <Button\n        title = {status.isPlaying ? 'Pause' : 'Play'}\n        onPress={() =>\n          status.isPlaying ? video.current.pauseAsync() : video.current.playAsync()\n        }\n        />\n    </View>\n   </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}