{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { Video } from 'expo-av';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      hasAudioPermission = _useState2[0],\n      setHasAudioPermission = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasCameraPermission = _useState4[0],\n      setHasCameraPermission = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      camera = _useState6[0],\n      setCamera = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      record = _useState8[0],\n      setRecord = _useState8[1];\n\n  var _useState9 = useState(Camera.Constants.Type.back),\n      _useState10 = _slicedToArray(_useState9, 2),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var video = React.useRef(null);\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      status = _React$useState2[0],\n      setStatus = _React$useState2[1];\n\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n      setHasCameraPermission(cameraStatus.status === 'granted');\n      var audioStatus = yield Camera.requestMicrophonePermissionsAsync();\n      setHasAudioPermission(audioStatus.status === 'granted');\n    })();\n  }, []);\n\n  var takeVideo = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (camera) {\n        var data = yield camera.recordAsync({\n          maxDuration: 10\n        });\n        setRecord(data.uri);\n        console.log(data.uri);\n      }\n    });\n\n    return function takeVideo() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var stopVideo = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      camera.stopRecording();\n    });\n\n    return function stopVideo() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  if (hasCameraPermission === null || hasAudioPermission === null) {\n    return _jsx(View, {});\n  }\n\n  if (hasCameraPermission === false || hasAudioPermission === false) {\n    return _jsx(Text, {\n      children: \"No access to camera.\"\n    });\n  }\n\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [_jsx(View, {\n      style: styles.cameraContainer,\n      children: _jsx(Camera, {\n        ref: function ref(_ref4) {\n          return setCamera(_ref4);\n        },\n        style: styles.fixedRatio,\n        type: type,\n        ratio: '4:3'\n      })\n    }), _jsx(Video, {\n      ref: video,\n      style: styles.video,\n      source: {\n        uri: record\n      },\n      useNativeControls: true,\n      resizeMode: \"contain\",\n      isLooping: true,\n      onPlaybackStatusUpdate: function onPlaybackStatusUpdate(status) {\n        return setStatus(function () {\n          return status;\n        });\n      }\n    }), _jsx(View, {\n      style: styles.buttons,\n      children: _jsx(Button, {\n        title: status.isPlaying ? 'Pause' : 'Play',\n        onPress: function onPress() {\n          return status.isPlaying ? video.current.pauseAsync() : video.current.playAsync();\n        }\n      })\n    }), _jsx(Button, {\n      title: \"Flip Video\",\n      onPress: function onPress() {\n        setType(type === camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back);\n      }\n    }), _jsx(Button, {\n      title: \"Take Video\",\n      onPress: function onPress() {\n        return takeVideo();\n      }\n    }), _jsx(Button, {\n      title: \"Stop Video\",\n      onPress: function onPress() {\n        return stopVideo();\n      }\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  cameraContainer: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  fixedRatio: {\n    flex: 1,\n    aspectRatio: 1\n  },\n  video: {\n    alignSelf: 'center',\n    width: 350,\n    height: 220\n  },\n  buttons: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","Camera","Video","App","hasAudioPermission","setHasAudioPermission","hasCameraPermission","setHasCameraPermission","camera","setCamera","record","setRecord","Constants","Type","back","type","setType","video","useRef","status","setStatus","cameraStatus","requestCameraPermissionsAsync","audioStatus","requestMicrophonePermissionsAsync","takeVideo","data","recordAsync","maxDuration","uri","console","log","stopVideo","stopRecording","flex","styles","cameraContainer","ref","fixedRatio","buttons","isPlaying","current","pauseAsync","playAsync","front","StyleSheet","create","flexDirection","aspectRatio","alignSelf","width","height","justifyContent","alignItems"],"sources":["/Users/markvalentino/reactnativeprojects/AI/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { StyleSheet, Text, View, Button, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { Video } from 'expo-av';\n\n// https://www.youtube.com/watch?v=4VFYqw5h_qs\nexport default function App() {\n\n  const [hasAudioPermission, setHasAudioPermission] = useState(null);\n  const [hasCameraPermission, setHasCameraPermission] = useState(null);\n  const [camera, setCamera] = useState(null);\n  const [record, setRecord] = useState(null);\n  const [type, setType] = useState(Camera.Constants.Type.back);\n  const video = React.useRef(null);\n  const [status, setStatus] = React.useState({});\n\n  useEffect(() => {\n    (async () => {\n      const cameraStatus = await Camera.requestCameraPermissionsAsync();\n      setHasCameraPermission(cameraStatus.status === 'granted');\n\n      const audioStatus = await Camera.requestMicrophonePermissionsAsync();\n      setHasAudioPermission(audioStatus.status === 'granted');\n\n    })();\n  }, []);\n\n  const takeVideo = async () => {\n    if(camera){\n      const data = await camera.recordAsync({\n        maxDuration:10\n      })\n      setRecord(data.uri);\n      console.log(data.uri);\n    }\n  }\n\n  const stopVideo = async () => {\n    camera.stopRecording();\n  }\n\n  if (hasCameraPermission === null || hasAudioPermission === null) {\n    return <View />;\n  }\n\n  if (hasCameraPermission === false || hasAudioPermission === false){\n    return <Text>No access to camera.</Text>\n  }\n\n  return (\n   <View style = {{flex:1}} >\n    <View style = {styles.cameraContainer} >\n      <Camera\n      ref = {ref => setCamera(ref)}\n      style = {styles.fixedRatio}\n      type = {type}\n      ratio = {'4:3'} />\n\n    </View>\n    <Video \n    ref = {video}\n    style = {styles.video}\n    source = {{\n      uri: record,\n    }}\n    useNativeControls\n    resizeMode='contain'\n    isLooping\n    onPlaybackStatusUpdate={status => setStatus(()=>status)}\n    />\n    <View style={styles.buttons}>\n      <Button\n        title = {status.isPlaying ? 'Pause' : 'Play'}\n        onPress={() =>\n          status.isPlaying ? video.current.pauseAsync() : video.current.playAsync()\n        }\n        />\n    </View>\n    <Button \n    title = \"Flip Video\"\n    onPress= {()=> {\n      setType(\n        type === camera.Constants.Type.back\n        ? Camera.Constants.Type.front\n        : Camera.Constants.Type.back\n      );\n    }}\n    />\n    <Button title=\"Take Video\" onPress={()=> takeVideo()} />\n    <Button title=\"Stop Video\" onPress={()=> stopVideo()} />\n   </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  cameraContainer: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  fixedRatio: {\n    flex: 1,\n    aspectRatio: 1\n  },\n  video: {\n    alignSelf:'center',\n    width: 350,\n    height: 220\n  },\n  buttons: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}